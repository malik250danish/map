<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@100;200;300;400;500;600;700&display=swap");
    body{
      overflow: hidden;
    }

    * {
      font-family: "Josefin Sans", sans-serif;
    }

    .btnMap {
      position: absolute;
      top: 10%;
      left: 40px;
    }

    #myMap {
      height: 600px;
    }

    #mapDiv {
      position: static !important;
      width: 100%;
      overflow: hidden !important;
    }
  </style>
</head>

<body>
  <div class="container-fluid" style="overflow: hidden;">
    <div class="px-1">
      <div id="mapDiv" style="position: static important; "></div>
    </div>
    <div class="">
      <button class="btn btn-primary btnMap" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample"
        aria-controls="offcanvasExample">
        <i class="fa-solid fa-bars"></i>
      </button>
      <!-- side bar offcanvas -->
      <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample"
        aria-labelledby="offcanvasExampleLabel">
        <div class="offcanvas-header">
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <div class="mt-3">
            <div class="my-2 d-flex flex-column">
              <label
                class="form-label d-flex justify-content-between align-items-center w-100 fs-5 fw-bolder my-2">Country
                <i class="fa-solid text-muted fa-globe"></i></label>
              <select class="form-select" aria-label="Default select example">
                <option selected>Open this select menu</option>
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
              </select>
            </div>
            <div class="my-2 d-flex flex-column">
              <label
                class="form-label d-flex justify-content-between align-items-center w-100 fs-5 fw-bolder my-2">District
                <i class="fa-solid text-muted fa-tree-city"></i></label>
              <select class="form-select" aria-label="Default select example">
                <option selected>Open this select menu</option>
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
              </select>
            </div>
            <div class="my-2 d-flex flex-column">
              <label class="form-label d-flex justify-content-between align-items-center w-100 fs-5 fw-bolder my-2">Show
                <i class="fa-solid text-muted fa-tree-city"></i></label>
              <div class="mt-1">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="flexCheckIndeterminate" />
                  <label class="form-check-label" for="flexCheckIndeterminate">
                    Address
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="flexCheckIndeterminate2" />
                  <label class="form-check-label" for="flexCheckIndeterminate2">
                    Roads
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="flexCheckIndeterminate3" />
                  <label class="form-check-label" for="flexCheckIndeterminate3">
                    Lands
                  </label>
                </div>
              </div>
            </div>
            <div class="my-2 d-flex flex-column">
              <label
                class="form-label d-flex justify-content-between align-items-center w-100 fs-5 fw-bolder my-2">Statistics
                <i class="fa-solid fa-stairs"></i></i></label>
              <select class="form-select" aria-label="Default select example">
                <option selected>Open this select menu</option>
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
              </select>
            </div>
            <div class="my-2">
              <button class="btn btn-primary w-100 pt-3">Login <i class="fa-solid fa-arrow-right-to-bracket"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- side bar end  -->

      <!-- modal opens on click of polygon -->

      <div class="modal" id="myModal">
        <div class="modal-dialog">
          <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
              <h5 class="modal-title fw-bolder">Land Details</h5>
              <button type="button" class="btn-close btnc" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <script>
              document.querySelector('.btnc').addEventListener('click', function () {
                document.querySelector('#myModal').classList.toggle("d-none")
              });

            </script>

            <!-- Modal Body -->
            <div class="modal-body" id="modalBodyContent">
              <div class="my-2 d-flex justify-content-between align-items-center">
                <p class="pr1 fw-bold">
                  Name: <span class="text-muted">Mountain 3</span>
                </p>
                <p class="pr1 fw-bold">
                  Address:
                  <span class="text-muted">52 Mountain cut,Lumley</span>
                </p>
              </div>
              <div class="my-2 d-flex justify-content-between align-items-center">
                <p class="pr1 fw-bold">
                  Type <span class="text-muted">Restricted</span>
                </p>
                <p class="pr1 fw-bold">
                  value:
                  <span class="text-muted">0</span>
                </p>
              </div>
              <div class="my-2 d-flex justify-content-between align-items-center">
                <p class="pr1 fw-bold">
                  Owner: <span class="text-muted">Restricted</span>
                </p>
                <p class="pr1 fw-bold">
                  Area (m^2):
                  <span class="text-muted">5994257.8</span>
                </p>
              </div>
              <div class="my-2 d-flex justify-content-between align-items-center">
                <p class="pr1 fw-bold">
                  Owner: <span class="text-muted">Restricted</span>
                </p>
                <p class="pr1 fw-bold">
                  Area (m^2):
                  <span class="text-muted">5994257.8</span>
                </p>
              </div>
              <div class="my-2 d-flex justify-content-between align-items-center">
                <p class="pr1 fw-bold">
                  Acres:

                  <span class="text-muted">1481.4</span>
                </p>
                <p class="pr1 fw-bold">
                  Perimeter (m):
                  <span class="text-muted"> 9309.4</span>
                </p>
              </div>
            </div>

            <!-- Modal Footer -->
            <div class="modal-footer">
              <button type="button" class="btn btn-primary w-100" data-bs-dismiss="modal">
                Ok
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- modal ends -->
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
  

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARSl30LP7Sp5yq6_P9xQK42WSrK2PRWpY&libraries=geometry&callback=initMap">
    </script>
  <script>
    function initMap() {
      // Initialize the map
      var map = new google.maps.Map(document.getElementById('mapDiv'), {
        center: { lat: 0, lng: 0 }, // Default center
        zoom: 2, // Default zoom level
      });

      // Array to store information about each polygon
      var polygonsData = [
        { id: 1, name: "Polygon 1", description: "This is the first polygon." },
        { id: 2, name: "Polygon 2", description: "This is the second polygon." },
        // Add more polygons with unique information
      ];

      // Try to get the user's location using Geolocation API
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (position) {
            // On success, set the map center to the user's location
            var userLocation = new google.maps.LatLng(
              position.coords.latitude,
              position.coords.longitude
            );
            map.setCenter(userLocation);
            map.setZoom(9);

            // Add a marker at the user's location
            var userMarker = new google.maps.Marker({
              position: userLocation,
              title: "Your Location",
              map: map,
            });

            // Example: Highlighting an area with a polygon around the user's location
            var radius = 0.1; // Adjust the radius of the highlighted area as needed

            var polygonCoordinates = [
              { lat: userLocation.lat() - radius, lng: userLocation.lng() - radius },
              { lat: userLocation.lat() - radius, lng: userLocation.lng() + radius },
              { lat: userLocation.lat() + radius, lng: userLocation.lng() + radius },
              { lat: userLocation.lat() + radius, lng: userLocation.lng() - radius },
            ];

            var polygon = new google.maps.Polygon({
              paths: polygonCoordinates,
              fillColor: "rgba(255, 0, 0, 0.5)", // Red with 50% opacity
              strokeColor: "red",
              strokeWeight: 2,
              map: map,
            });

            // Add a click event to the polygon to open the modal with specific information
            google.maps.event.addListener(polygon, 'click', function () {
              // Find the corresponding data for the clicked polygon
              var clickedPolygonData = polygonsData.find(function (data) {
                return data.id === 1; // Replace with a unique identifier for each polygon
              });

              // Populate the modal with information from the clicked polygon


              // Show the modal
              var myModal = document.getElementById("myModal")
              console.log('click')
              myModal.classList.remove('d-none');
              myModal.classList.add('d-block');
             
            });

            // Add markers and points of interest
            var marker1Location = new google.maps.LatLng(
              userLocation.lat() + 0.1,
              userLocation.lng() - 0.1
            );
            var marker1 = new google.maps.Marker({
              position: marker1Location,
              title: "Marker 1",
              map: map,
            });

            var marker2Location = new google.maps.LatLng(
              userLocation.lat() - 0.2,
              userLocation.lng() + 0.2
            );
            var marker2 = new google.maps.Marker({
              position: marker2Location,
              title: "Marker 2",
              map: map,
            });

            // Add points of interest
            var poi1Location = new google.maps.LatLng(
              userLocation.lat() + 0.15,
              userLocation.lng() + 0.15
            );
            var poi1 = new google.maps.Marker({
              position: poi1Location,
              title: "Point of Interest 1",
              map: map,
            });

            var poi2Location = new google.maps.LatLng(
              userLocation.lat() - 0.25,
              userLocation.lng() - 0.25
            );
            var poi2 = new google.maps.Marker({
              position: poi2Location,
              title: "Point of Interest 2",
              map: map,
            });
          },
          function (error) {
            // On error, handle the situation (e.g., show a message)
            console.error("Error getting user location:", error.message);
          }
        );
      } else {
        console.error("Geolocation is not supported by this browser.");
      }
    }

    // Use the standard addEventListener method instead of deprecated addDomListener
    window.addEventListener('load', initMap);
  </script>

</body>


</html>